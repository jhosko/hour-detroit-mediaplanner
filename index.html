<!doctype html>
<html lang=\"en\">
  <head>
    <meta charset=\"utf-8\" />
    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />
    <title>Hour Detroit — Media Plan Builder (Prototype)</title>
    <script src=\"https://cdn.tailwindcss.com\"></script>
    <script crossorigin src=\"https://unpkg.com/react@18/umd/react.production.min.js\"></script>
    <script crossorigin src=\"https://unpkg.com/react-dom@18/umd/react-dom.production.min.js\"></script>
    <script src=\"https://unpkg.com/@babel/standalone/babel.min.js\"></script>
  </head>
  <body class=\"bg-gray-50\">
    <div id=\"root\"></div>
    <script type=\"text/babel\" data-presets=\"react\">
      const { useMemo, useState, useRef } = React;

      const currency = (n) => n.toLocaleString(undefined, { style: \"currency\", currency: \"USD\", maximumFractionDigits: 0 });

      const PRINT_TIER_THRESHOLDS = [
        { label: \"12x\", minCredits: 12 },
        { label: \"9x\", minCredits: 9 },
        { label: \"6x\", minCredits: 6 },
        { label: \"3x\", minCredits: 3 },
        { label: \"1x\", minCredits: 0 },
      ];
      function getPrintTier(credits) {
        for (const t of PRINT_TIER_THRESHOLDS) if (credits >= t.minCredits) return t.label;
        return \"1x\";
      }
      function isPrintItem(item){ return !!item.rateTiers; }
      function computeUnitPrice(item, credits){
        if (isPrintItem(item)) {
          const tier = getPrintTier(credits);
          return item.rateTiers[tier] ?? Object.values(item.rateTiers)[0];
        }
        return item.price || 0;
      }

      const printStandard = [
        { id: \"print_spread\", category: \"Print — Standard\", name: \"Spread\", unitLabel: \"Insertions\", min: 1, max: 12, step: 1, reach: 194000, notes: \"Two facing pages.\", rateTiers: { \"1x\": 12300, \"3x\": 11640, \"6x\": 11000, \"9x\": 10350, \"12x\": 10075 } },
        { id: \"print_full\", category: \"Print — Standard\", name: \"Full Page\", unitLabel: \"Insertions\", min: 1, max: 12, step: 1, reach: 194000, notes: \"Bleed included.\", rateTiers: { \"1x\": 6485, \"3x\": 6175, \"6x\": 5865, \"9x\": 5435, \"12x\": 5230 } },
        { id: \"print_half\", category: \"Print — Standard\", name: \"Half Page\", unitLabel: \"Insertions\", min: 1, max: 12, step: 1, reach: 194000, notes: \"Horizontal or vertical.\", rateTiers: { \"1x\": 4590, \"3x\": 4355, \"6x\": 4130, \"9x\": 3760, \"12x\": 3670 } },
        { id: \"print_quarter\", category: \"Print — Standard\", name: \"Quarter Page\", unitLabel: \"Insertions\", min: 1, max: 12, step: 1, reach: 194000, notes: \"Standard position.\", rateTiers: { \"1x\": 2585, \"3x\": 2455, \"6x\": 2330, \"9x\": 2115, \"12x\": 2055 } },
      ];
      const printPremium = [
        { id: \"print_ifc\", category: \"Print — Premium\", name: \"Cover 2 (Inside Front Cover)\", unitLabel: \"Insertions\", min: 1, max: 12, step: 1, reach: 194000, notes: \"Premium position.\", rateTiers: { \"1x\": 8955, \"3x\": 8510, \"6x\": 8060, \"9x\": 7345, \"12x\": 7205 } },
        { id: \"print_ibc\", category: \"Print — Premium\", name: \"Cover 3 (Inside Back Cover)\", unitLabel: \"Insertions\", min: 1, max: 12, step: 1, reach: 194000, notes: \"Premium position.\", rateTiers: { \"1x\": 7445, \"3x\": 7070, \"6x\": 6700, \"9x\": 6110, \"12x\": 5960 } },
        { id: \"print_bc\", category: \"Print — Premium\", name: \"Cover 4 (Back Cover)\", unitLabel: \"Insertions\", min: 1, max: 12, step: 1, reach: 194000, notes: \"Back cover.\", rateTiers: { \"1x\": 9935, \"3x\": 9440, \"6x\": 8940, \"9x\": 8145, \"12x\": 7945 } },
        { id: \"print_toc\", category: \"Print — Premium\", name: \"TOC / Guaranteed Position\", unitLabel: \"Insertions\", min: 1, max: 12, step: 1, reach: 194000, notes: \"Guaranteed placement.\", rateTiers: { \"1x\": 7445, \"3x\": 7070, \"6x\": 6700, \"9x\": 6110, \"12x\": 5960 } },
      ];
      const printGroup = [
        { id: \"group_full\", category: \"Print — Group Sections\", name: \"Group Sections — Full Page\", unitLabel: \"Insertions\", min: 1, max: 12, step: 1, reach: 194000, notes: \"Marketplace, Dining & Nightlife, Voted the Best, Bridal Directory, Travel Destinations.\", rateTiers: { \"1x\": 5230, \"3x\": 4920, \"6x\": 4605, \"9x\": 4295, \"12x\": 3980 } },
        { id: \"group_half\", category: \"Print — Group Sections\", name: \"Group Sections — Half Page\", unitLabel: \"Insertions\", min: 1, max: 12, step: 1, reach: 194000, notes: \"Grouped advertorial sections.\", rateTiers: { \"1x\": 3670, \"3x\": 3250, \"6x\": 2830, \"9x\": 2410, \"12x\": 1990 } },
        { id: \"group_quarter\", category: \"Print — Group Sections\", name: \"Group Sections — Quarter Page\", unitLabel: \"Insertions\", min: 1, max: 12, step: 1, reach: 194000, notes: \"Grouped advertorial sections.\", rateTiers: { \"1x\": 2055, \"3x\": 1790, \"6x\": 1525, \"9x\": 1260, \"12x\": 995 } },
      ];

      const digital = [
        { id: \"digital_partner\", category: \"Digital\", name: \"Digital Partnership (Monthly)\", unitLabel: \"Months\", price: 2995, min: 0, max: 12, step: 1, reach: 320000, notes: \"Bundle: logo on all pages, 100k min impressions/mo, 12 e-newsletter 300x250/mo, 1 dedicated e-blast/quarter, 1 sponsored social/mo. 3-month minimum recommended.\" },
        { id: \"digital_directory\", category: \"Digital\", name: \"Premium Directory Profile\", unitLabel: \"Years\", price: 1495, min: 0, max: 3, step: 1, reach: 0, notes: \"Annual.\" },
        { id: \"email_presenting\", category: \"Digital\", name: \"E-Newsletter Presenting Sponsorship (Weekly)\", unitLabel: \"Weeks\", price: 575, min: 0, max: 52, step: 1, reach: 30000, notes: \"Weekly placement.\" },
        { id: \"spon_content\", category: \"Digital\", name: \"Sponsored Content Article (+ Social)\", unitLabel: \"Articles\", price: 1995, min: 0, max: 20, step: 1, reach: 0, notes: \"Includes social promotion.\" },
        { id: \"social_post\", category: \"Digital\", name: \"Sponsored Social Media Post\", unitLabel: \"Posts\", price: 800, min: 0, max: 20, step: 1, reach: 286000, notes: \"Posted to Hour Detroit channels.\" },
        { id: \"digital_edition_sponsor\", category: \"Digital\", name: \"Digital Edition Sponsorship\", unitLabel: \"Issues\", price: 1500, min: 0, max: 12, step: 1, reach: 3000, notes: \"Per issue.\" },
        { id: \"dedicated_eblast_full\", category: \"Digital\", name: \"Dedicated Partner Message E-Blast — Full List (30,000+)\", unitLabel: \"Sends\", price: 1995, min: 0, max: 12, step: 1, reach: 30000, notes: \"First-party list.\" },
        { id: \"dedicated_eblast_food\", category: \"Digital\", name: \"Dedicated E-Blast — Food & Drink Segment (9,000+)\", unitLabel: \"Sends\", price: 995, min: 0, max: 12, step: 1, reach: 9000, notes: \"Segmented list.\" },
        { id: \"dedicated_eblast_travel\", category: \"Digital\", name: \"Dedicated E-Blast — Travel Segment (9,000+)\", unitLabel: \"Sends\", price: 995, min: 0, max: 12, step: 1, reach: 9000, notes: \"Segmented list.\" },
        { id: \"dedicated_eblast_health\", category: \"Digital\", name: \"Dedicated E-Blast — Health & Fitness (4,000+)\", unitLabel: \"Sends\", price: 895, min: 0, max: 12, step: 1, reach: 4000, notes: \"Segmented list.\" },
        { id: \"thirdparty_email\", category: \"Digital\", name: \"Targeted Email (3rd Party) — 50,000\", unitLabel: \"Blasts\", price: 1250, min: 0, max: 20, step: 1, reach: 50000, notes: \"Third-party deployment; add-on remarketing $600/campaign; redrop $500.\" },
        { id: \"thirdparty_redrop\", category: \"Digital\", name: \"Targeted Email Redrop (3rd Party)\", unitLabel: \"Redrops\", price: 500, min: 0, max: 20, step: 1, reach: 0, notes: \"Follow-up send.\" },
        { id: \"remarketing\", category: \"Digital\", name: \"Remarketing (3rd Party)\", unitLabel: \"Campaigns\", price: 600, min: 0, max: 20, step: 1, reach: 0, notes: \"Per campaign.\" },
        { id: \"local_minute_video\", category: \"Digital\", name: \"Local Minute Video\", unitLabel: \"Videos\", price: 9500, min: 0, max: 10, step: 1, reach: 0, notes: \"Video content package.\" },
        { id: \"live_link\", category: \"Digital\", name: \"Digital Edition Live Link\", unitLabel: \"Links\", price: 100, min: 0, max: 50, step: 1, reach: 0, notes: \"Clickable link in digital edition.\" },
        { id: \"lower_takeover\", category: \"Digital\", name: \"High Impact Lower Takeover (Weekly)\", unitLabel: \"Weeks\", price: 750, min: 0, max: 52, step: 1, reach: 0, notes: \"Site takeover placement.\" },
      ];

      const events = [
        { id: \"bod_presenting\", category: \"Events — June (Best of Detroit)\", name: \"Best of Detroit — Presenting\", unitLabel: \"Sponsorships\", price: 25000, min: 0, max: 1, step: 1, reach: 0, notes: \"June 26, 2025 — Westin Book Cadillac, Detroit.\" },
        { id: \"bod_major\", category: \"Events — June (Best of Detroit)\", name: \"Best of Detroit — Major\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 10, step: 1, reach: 0, notes: \"June 26, 2025 — Westin Book Cadillac, Detroit.\" },
        { id: \"bod_gold\", category: \"Events — June (Best of Detroit)\", name: \"Best of Detroit — Gold\", unitLabel: \"Sponsorships\", price: 5000, min: 0, max: 20, step: 1, reach: 0, notes: \"June 26, 2025 — Westin Book Cadillac, Detroit.\" },
        { id: \"bod_lounge\", category: \"Events — June (Best of Detroit)\", name: \"Best of Detroit — Branded Lounge\", unitLabel: \"Lounge\", price: 1500, min: 0, max: 10, step: 1, reach: 0, notes: \"June 26, 2025 — Westin Book Cadillac, Detroit.\" },
        { id: \"bod_automotive\", category: \"Events — June (Best of Detroit)\", name: \"Best of Detroit — Automotive\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 5, step: 1, reach: 0, notes: \"Automotive category.\" },
        { id: \"bod_redcarpet\", category: \"Events — June (Best of Detroit)\", name: \"Best of Detroit — Red Carpet\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 3, step: 1, reach: 0, notes: \"Red carpet activation.\" },
        { id: \"bod_beverage\", category: \"Events — June (Best of Detroit)\", name: \"Best of Detroit — Beverage\", unitLabel: \"Sponsorships\", price: 3000, min: 0, max: 10, step: 1, reach: 0, notes: \"Category exclusivity by beverage type.\" },
        { id: \"bod_mainstage\", category: \"Events — June (Best of Detroit)\", name: \"Best of Detroit — Main Stage\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 2, step: 1, reach: 0, notes: \"Stage branding.\" },
        { id: \"bod_viplounge\", category: \"Events — June (Best of Detroit)\", name: \"Best of Detroit — Speak Easy/VIP Lounge\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 2, step: 1, reach: 0, notes: \"VIP area branding.\" },

        { id: \"gf_competitor\", category: \"Events — August (GrillFest)\", name: \"GrillFest — Best Bite Competitor Entry\", unitLabel: \"Entries\", price: 1195, min: 0, max: 3, step: 1, reach: 0, notes: \"Aug 17, 2025 — Eastern Market Shed 5, Detroit.\" },
        { id: \"gf_bev_table\", category: \"Events — August (GrillFest)\", name: \"GrillFest — Beverage Tasting Table\", unitLabel: \"Tables\", price: 795, min: 0, max: 10, step: 1, reach: 0, notes: \"10x10 with TIPS bartender.\" },
        { id: \"gf_presenting\", category: \"Events — August (GrillFest)\", name: \"GrillFest — Presenting\", unitLabel: \"Sponsorships\", price: 20000, min: 0, max: 1, step: 1, reach: 0, notes: \"Eastern Market Shed 5.\" },
        { id: \"gf_major\", category: \"Events — August (GrillFest)\", name: \"GrillFest — Major\", unitLabel: \"Sponsorships\", price: 7500, min: 0, max: 5, step: 1, reach: 0, notes: \"Eastern Market Shed 5.\" },
        { id: \"gf_beverage\", category: \"Events — August (GrillFest)\", name: \"GrillFest — Beverage Sponsor\", unitLabel: \"Sponsorships\", price: 2500, min: 0, max: 10, step: 1, reach: 0, notes: \"Beverage sponsor benefits.\" },
        { id: \"gf_gold\", category: \"Events — August (GrillFest)\", name: \"GrillFest — Gold\", unitLabel: \"Sponsorships\", price: 5000, min: 0, max: 10, step: 1, reach: 0, notes: \"On-site activation + logo on signage.\" },
        { id: \"gf_bestbite_sponsor\", category: \"Events — August (GrillFest)\", name: \"GrillFest — Best Bite Competition Sponsor\", unitLabel: \"Sponsorships\", price: 15000, min: 0, max: 1, step: 1, reach: 0, notes: \"Title sponsor of voting platform.\" },
        { id: \"gf_cornhole\", category: \"Events — August (GrillFest)\", name: \"GrillFest — Cornhole Sponsor\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 1, step: 1, reach: 0, notes: \"Logo on boards.\" },
        { id: \"gf_swbag\", category: \"Events — August (GrillFest)\", name: \"GrillFest — VIP Swag Bag Sponsor\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 1, step: 1, reach: 0, notes: \"Logo on 200 bags.\" },
        { id: \"gf_kidzone\", category: \"Events — August (GrillFest)\", name: \"GrillFest — Kid Zone Sponsor\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 1, step: 1, reach: 0, notes: \"Bounce house, face painting.\" },
        { id: \"gf_vehicle\", category: \"Events — August (GrillFest)\", name: \"GrillFest — Vehicle Sponsor\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 1, step: 1, reach: 0, notes: \"Up to four vehicles.\" },
        { id: \"gf_sunglasses\", category: \"Events — August (GrillFest)\", name: \"GrillFest — Sunglasses Sponsor\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 1, step: 1, reach: 0, notes: \"500 sunglasses.\" },
        { id: \"gf_charge\", category: \"Events — August (GrillFest)\", name: \"GrillFest — Charging Station Sponsor\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 1, step: 1, reach: 0, notes: \"Charging station branding.\" },

        { id: \"savor_presenting\", category: \"Events — October (Savor Detroit)\", name: \"Savor Detroit — Presenting\", unitLabel: \"Sponsorships\", price: 20000, min: 0, max: 1, step: 1, reach: 0, notes: \"Great Lakes Culinary Center.\" },
        { id: \"savor_major\", category: \"Events — October (Savor Detroit)\", name: \"Savor Detroit — Major\", unitLabel: \"Sponsorships\", price: 7500, min: 0, max: 4, step: 1, reach: 0, notes: \"All nights recognition.\" },
        { id: \"savor_beverage\", category: \"Events — October (Savor Detroit)\", name: \"Savor Detroit — Beverage\", unitLabel: \"Sponsorships\", price: 2500, min: 0, max: 4, step: 1, reach: 0, notes: \"In signature cocktail.\" },
        { id: \"savor_silver\", category: \"Events — October (Savor Detroit)\", name: \"Savor Detroit — Silver\", unitLabel: \"Sponsorships\", price: 1500, min: 0, max: 4, step: 1, reach: 0, notes: \"One night, 2 tickets.\" },
        { id: \"savor_table\", category: \"Events — October (Savor Detroit)\", name: \"Savor Detroit — Reserved Table\", unitLabel: \"Tables\", price: 2000, min: 0, max: 4, step: 1, reach: 0, notes: \"Reserved table.\" },
        { id: \"savor_activation_cocktail\", category: \"Events — October (Savor Detroit)\", name: \"Savor Detroit — Activation: Cocktail Hour Sponsor\", unitLabel: \"Activations\", price: 7500, min: 0, max: 1, step: 1, reach: 0, notes: \"Premium activation.\" },
        { id: \"savor_activation_art\", category: \"Events — October (Savor Detroit)\", name: \"Savor Detroit — Activation: Tony Roko Art Auction\", unitLabel: \"Activations\", price: 7500, min: 0, max: 1, step: 1, reach: 0, notes: \"Premium activation.\" },
        { id: \"savor_activation_social\", category: \"Events — October (Savor Detroit)\", name: \"Savor Detroit — Activation: Social Media Sponsor\", unitLabel: \"Activations\", price: 7500, min: 0, max: 1, step: 1, reach: 0, notes: \"Premium activation.\" },

        { id: \"eic_presenting\", category: \"Events — October (Excellence in Care)\", name: \"Excellence in Care — Presenting\", unitLabel: \"Sponsorships\", price: 15000, min: 0, max: 1, step: 1, reach: 0, notes: \"Colony Club, Detroit.\" },
        { id: \"eic_major\", category: \"Events — October (Excellence in Care)\", name: \"Excellence in Care — Major\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 4, step: 1, reach: 0, notes: \"Major sponsor benefits.\" },
        { id: \"eic_gold\", category: \"Events — October (Excellence in Care)\", name: \"Excellence in Care — Gold\", unitLabel: \"Sponsorships\", price: 5000, min: 0, max: 6, step: 1, reach: 0, notes: \"Gold sponsor benefits.\" },
        { id: \"eic_silver\", category: \"Events — October (Excellence in Care)\", name: \"Excellence in Care — Silver\", unitLabel: \"Sponsorships\", price: 1500, min: 0, max: 10, step: 1, reach: 0, notes: \"Silver sponsor benefits.\" },
        { id: \"eic_table\", category: \"Events — October (Excellence in Care)\", name: \"Excellence in Care — Table\", unitLabel: \"Tables\", price: 1500, min: 0, max: 10, step: 1, reach: 0, notes: \"Premium reserved table.\" },
        { id: \"eic_td_hof\", category: \"Events — October (Excellence in Care)\", name: \"Excellence in Care — Top Dentists Hall of Fame\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 1, step: 1, reach: 0, notes: \"Award sponsor.\" },
        { id: \"eic_tdox_hof\", category: \"Events — October (Excellence in Care)\", name: \"Excellence in Care — Top Docs Hall of Fame\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 1, step: 1, reach: 0, notes: \"Award sponsor.\" },
        { id: \"eic_tc_hof\", category: \"Events — October (Excellence in Care)\", name: \"Excellence in Care — Top Chiropractors Hall of Fame\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 1, step: 1, reach: 0, notes: \"Award sponsor.\" },
        { id: \"eic_nurse_year\", category: \"Events — October (Excellence in Care)\", name: \"Excellence in Care — Nurse of the Year\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 1, step: 1, reach: 0, notes: \"Award sponsor.\" },
        { id: \"eic_beverage\", category: \"Events — October (Excellence in Care)\", name: \"Excellence in Care — Beverage Sponsor\", unitLabel: \"Sponsorships\", price: 2000, min: 0, max: 2, step: 1, reach: 0, notes: \"Category exclusivity; product at bar.\" },
        { id: \"eic_redcarpet\", category: \"Events — October (Excellence in Care)\", name: \"Excellence in Care — Red Carpet Sponsor\", unitLabel: \"Sponsorships\", price: 10000, min: 0, max: 1, step: 1, reach: 0, notes: \"Red carpet signage.\" },
        { id: \"eic_dinner\", category: \"Events — October (Excellence in Care)\", name: \"Excellence in Care — Dinner Sponsor\", unitLabel: \"Sponsorships\", price: 2000, min: 0, max: 1, step: 1, reach: 0, notes: \"Dinner sponsor.\" },
        { id: \"eic_dessert\", category: \"Events — October (Excellence in Care)\", name: \"Excellence in Care — Dessert Table Sponsor\", unitLabel: \"Sponsorships\", price: 2000, min: 0, max: 1, step: 1, reach: 0, notes: \"Dessert & coffee.\" },
      ];

      const offerings = [...printStandard, ...printPremium, ...printGroup, ...digital, ...events];

      function calculateDiscounts(lines, lineSubtotal) {
        const out = [];
        const categoriesChosen = new Set(lines.filter(l => l.qty > 0).map(l => l.category));
        if (categoriesChosen.size >= 3) {
          const disc = 0.10 * lineSubtotal;
          out.push({ code: \"BUNDLE3\", label: \"Bundle across 3+ channels\", amount: -disc });
        }
        return out;
      }

      function App() {
        const [lines, setLines] = useState(() => offerings.map(o => ({ ...o, qty: 0 })));
        const [targetBudget, setTargetBudget] = useState(0);

        const commitmentCredits = useMemo(() => {
          return lines.reduce((acc, l) => {
            if (!l.qty) return acc;
            if (l.rateTiers) return acc + l.qty;
            if (l.category.startsWith(\"Events\")) return acc + l.qty;
            if (l.id === \"digital_partner\") return acc + l.qty;
            return acc;
          }, 0);
        }, [lines]);
        const currentPrintTier = getPrintTier(commitmentCredits);

        const setQty = (id, qty) => setLines(prev => prev.map(l => (l.id === id ? { ...l, qty } : l)));

        const autoDistribute = () => {
          if (!targetBudget || targetBudget < 500) return;
          let remaining = targetBudget;
          let newLines = offerings.map(o => ({ ...o, qty: 0 }));
          const order = [
            \"print_full\", \"digital_partner\", \"email_presenting\", \"bod_gold\", \"gf_gold\", \"savor_silver\", \"eic_silver\",
            \"print_half\", \"dedicated_eblast_full\", \"social_post\", \"group_full\"
          ];
          for (const id of order) {
            const idx = newLines.findIndex(l => l.id === id);
            if (idx === -1) continue;
            const item = newLines[idx];
            const tempCredits = newLines.reduce((a,b)=>a + (b.rateTiers?b.qty:0) + (b.category?.startsWith(\"Events\")?b.qty:0) + (b.id===\"digital_partner\"?b.qty:0), 0);
            const unitPrice = computeUnitPrice(item, tempCredits);
            while (remaining >= unitPrice && item.qty + (item.step||1) <= (item.max||999)) {
              const nextQty = item.qty + (item.step||1);
              const nextCost = nextQty * unitPrice;
              if (nextCost <= remaining * 1.05) {
                item.qty = nextQty;
                remaining -= unitPrice * (item.step||1);
              } else break;
            }
          }
          setLines(newLines);
        };

        const totals = useMemo(() => {
          const lineSubtotal = lines.reduce((a, b) => a + (b.qty || 0) * computeUnitPrice(b, commitmentCredits), 0);
          const estReach = lines.reduce((a, b) => a + (b.qty * (b.reach || 0)), 0);
          const discounts = calculateDiscounts(lines, lineSubtotal);
          const discountTotal = discounts.reduce((a, b) => a + b.amount, 0);
          const net = Math.max(0, lineSubtotal + discountTotal);
          return { lineSubtotal, discounts, discountTotal, net, estReach };
        }, [lines, commitmentCredits]);

        return (
          <div className=\"min-h-screen bg-gray-50\">
            <header className=\"sticky top-0 z-10 bg-white/90 backdrop-blur border-b border-gray-200\">
              <div className=\"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between\">
                <div className=\"flex items-center gap-3\">
                  <div className=\"w-10 h-10 rounded-2xl bg-black text-white grid place-items-center font-semibold\">HD</div>
                  <div>
                    <h1 className=\"text-xl font-bold\">Hour Detroit — Media Plan Builder</h1>
                    <p className=\"text-sm text-gray-500\">Build your custom cross-channel plan. Pricing shown is illustrative.</p>
                  </div>
                </div>
                <div className=\"flex items-center gap-2\">
                  <input type=\"number\" min={0} className=\"border rounded-xl px-3 py-2 w-40\" placeholder=\"Target budget ($)\" value={targetBudget || \"\\"} onChange={(e)=>setTargetBudget(Number(e.target.value)||0)} />
                  <button onClick={autoDistribute} className=\"px-3 py-2 rounded-xl bg-black text-white\">Auto-build</button>
                  <button onClick={()=>setLines(offerings.map(o=>({...o, qty:0})))} className=\"px-3 py-2 rounded-xl border\">Clear</button>
                </div>
              </div>
            </header>

            <main className=\"max-w-7xl mx-auto px-4 py-6 grid lg:grid-cols-3 gap-6 print:block\">
              <section className=\"lg:col-span-2 bg-white rounded-2xl shadow p-4 print:shadow-none print:p-0\">
                <h2 className=\"text-lg font-semibold mb-3\">Choose your placements</h2>
                {Array.from(new Set(offerings.map(o=>o.category))).map(cat => (
                  <div key={cat} className=\"mb-6\">
                    <div className=\"flex items-center justify-between\">
                      <h3 className=\"font-semibold text-gray-700\">{cat}</h3>
                      <div className=\"text-xs text-gray-500\">Tiered print rates unlock via Commitment Credits.</div>
                    </div>
                    <div className=\"mt-2 overflow-hidden rounded-xl border\">
                      <table className=\"w-full text-sm\">
                        <thead className=\"bg-gray-100 text-left\">
                          <tr>
                            <th className=\"p-3\">Placement</th>
                            <th className=\"p-3\">Unit</th>
                            <th className=\"p-3 text-right\">Unit Price</th>
                            <th className=\"p-3 text-center\">Qty</th>
                            <th className=\"p-3 text-right\">Line Total</th>
                          </tr>
                        </thead>
                        <tbody>
                          {lines.filter(l=>l.category===cat).map(l => (
                            <tr key={l.id} className=\"border-t align-top\">
                              <td className=\"p-3\">
                                <div className=\"font-medium\">{l.name}</div>
                                <div className=\"text-xs text-gray-500\">{l.notes}</div>
                              </td>
                              <td className=\"p-3\">{l.unitLabel}</td>
                              <td className=\"p-3 text-right whitespace-nowrap\">{currency(computeUnitPrice(l, commitmentCredits))}{isPrintItem(l) && <span className=\"ml-1 text-[10px] text-gray-500\">({getPrintTier(commitmentCredits)})</span>}</td>
                              <td className=\"p-3 text-center\">
                                <div className=\"inline-flex items-center gap-2\">
                                  <button className=\"px-2 py-1 border rounded-lg\" onClick={()=>setQty(l.id, Math.max(l.min || 0, Math.min(l.max || 999, (l.qty||0) - (l.step||1))))}>–</button>
                                  <input
                                    type=\"number\"
                                    min={l.min || 0}
                                    max={l.max || 999}
                                    step={l.step || 1}
                                    value={l.qty || 0}
                                    onChange={(e)=>setQty(l.id, Math.max(l.min || 0, Math.min(l.max || 999, Number(e.target.value)||0)))}
                                    className=\"w-24 border rounded-lg px-2 py-1 text-center\"
                                  />
                                  <button className=\"px-2 py-1 border rounded-lg\" onClick={()=>setQty(l.id, Math.max(l.min || 0, Math.min(l.max || 999, (l.qty||0) + (l.step||1))))}>+</button>
                                </div>
                                <div className=\"text-[11px] text-gray-500 mt-1\">Min {l.min || 0} • Max {l.max || 999} • Step {l.step || 1}</div>
                              </td>
                              <td className=\"p-3 text-right font-medium\">{currency((l.qty||0)*computeUnitPrice(l, commitmentCredits))}</td>
                            </tr>
                          ))}
                        </tbody>
                      </table>
                    </div>
                  </div>
                ))}
              </section>

              <aside className=\"bg-white rounded-2xl shadow p-4 h-fit sticky top-20 print:static print:shadow-none print:p-0\">
                <h2 className=\"text-lg font-semibold mb-3\">Summary</h2>
                <div className=\"space-y-2 text-sm\">
                  <div className=\"flex justify-between\"><span>Commitment Credits</span><span className=\"font-medium\">{commitmentCredits}</span></div>
                  <div className=\"flex justify-between\"><span>Current Print Tier</span><span className=\"font-semibold\">{currentPrintTier}</span></div>
                  <div className=\"flex justify-between\"><span>Subtotal</span><span className=\"font-medium\">{currency(totals.lineSubtotal)}</span></div>
                  {totals.discounts.map(d => (
                    <div key={d.code} className=\"flex justify-between text-emerald-700\"><span>{d.label}</span><span>{currency(d.amount)}</span></div>
                  ))}
                  <div className=\"border-t pt-2 flex justify-between text-base\">
                    <span className=\"font-semibold\">Estimated Total</span>
                    <span className=\"font-bold\">{currency(totals.net)}</span>
                  </div>
                  <div className=\"flex justify-between text-xs text-gray-600\">
                    <span>Est. combined reach* </span>
                    <span>{totals.estReach.toLocaleString()}+</span>
                  </div>
                </div>

                <div className=\"mt-4 p-3 rounded-xl bg-gray-50 text-[11px] text-gray-600\">
                  *Reach estimates are directional and subject to inventory, pacing, targeting, and seasonality. Final pricing and specs confirmed by Hour Detroit.
                </div>
              </aside>
            </main>

            <footer className=\"max-w-7xl mx-auto px-4 pb-10 text-xs text-gray-500\">
              © 2025 Hour Detroit (Demo planner). All pricing/specs are illustrative.
            </footer>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>
